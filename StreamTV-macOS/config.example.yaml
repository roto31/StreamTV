# StreamTV Configuration

server:
  host: "0.0.0.0"
  port: 8410
  base_url: "http://localhost:8410"

database:
  url: "sqlite:///./streamtv.db"

streaming:
  buffer_size: 8192
  chunk_size: 1024
  timeout: 30
  max_retries: 3

youtube:
  enabled: true
  quality: "best"  # best, worst, or specific quality
  extract_audio: false
  cookies_file: null  # Path to cookies.txt file for YouTube authentication
  use_authentication: false  # Set to true to enable YouTube authentication
  api_key: null  # YouTube Data API v3 key (recommended - get from https://console.cloud.google.com/apis/credentials)
  oauth_client_id: null  # Google OAuth client ID (for OAuth method)
  oauth_client_secret: null  # Google OAuth client secret (for OAuth method)
  oauth_refresh_token: null  # OAuth refresh token (auto-generated after first auth)

archive_org:
  enabled: true
  preferred_format: "h264"  # h264, mpeg4, etc.
  username: null  # Archive.org username (optional, for restricted content)
  password: null  # Archive.org password (optional, for restricted content)
  use_authentication: false  # Set to true to enable authentication

security:
  api_key_required: false
  access_token: null  # Set to require authentication

logging:
  level: "INFO"
  file: "streamtv.log"

hdhomerun:
  enabled: true
  device_id: "FFFFFFFF"
  friendly_name: "StreamTV HDHomeRun"
  tuner_count: 2
  enable_ssdp: true  # Enable SSDP discovery (requires port 1900). Set to false if port is in use.

plex:
  enabled: false  # Enable Plex API integration for EPG enhancement
  base_url: null  # Plex Media Server URL (e.g., "http://192.168.1.100:32400")
  token: null  # Plex authentication token (get from Plex server settings)
  use_for_epg: false  # Use Plex API for EPG metadata enhancement and validation

ffmpeg:
  ffmpeg_path: "/usr/local/bin/ffmpeg"  # Path to FFmpeg binary
  ffprobe_path: "/usr/local/bin/ffprobe"  # Path to FFprobe binary
  log_level: "info"  # FFmpeg log level (quiet, panic, fatal, error, warning, info, verbose, debug)
  threads: 0  # Number of threads (0 = auto)
  hwaccel: null  # Hardware acceleration (videotoolbox, cuda, qsv, vaapi, null for software)
  hwaccel_device: null  # Hardware acceleration device (e.g., "0" for CUDA device 0)
  extra_flags: null  # Additional FFmpeg flags (e.g., "-maxrate 3000k -bufsize 6000k")
  
  # Per-source FFmpeg overrides (optional - these override global settings for specific sources)
  youtube_hwaccel: null  # YouTube-specific hardware acceleration
  youtube_video_encoder: null  # YouTube-specific video encoder (e.g., "h264_videotoolbox", "h264_nvenc")
  archive_org_hwaccel: null  # Archive.org-specific hardware acceleration
  archive_org_video_encoder: null  # Archive.org-specific video encoder
  pbs_hwaccel: null  # PBS-specific hardware acceleration
  pbs_video_encoder: null  # PBS-specific video encoder
  plex_hwaccel: null  # Plex-specific hardware acceleration
  plex_video_encoder: null  # Plex-specific video encoder

playout:
  build_days: 1  # Number of days ahead to build playout schedules
