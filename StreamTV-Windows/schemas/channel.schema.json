{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Channel Configuration Schema",
  "description": "JSON schema for validating channel YAML configuration files",
  "type": "object",
  "required": ["channels"],
  "properties": {
    "channels": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["number", "name", "streams"],
        "properties": {
          "number": {
            "type": "string",
            "description": "Channel number (e.g., '1980', '1984')"
          },
          "name": {
            "type": "string",
            "description": "Channel name"
          },
          "group": {
            "type": "string",
            "description": "Channel group (e.g., 'Winter Olympics')"
          },
          "description": {
            "type": "string",
            "description": "Channel description"
          },
          "enabled": {
            "type": "boolean",
            "default": true,
            "description": "Whether the channel is enabled"
          },
          "streams": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "required": ["id", "collection", "url"],
              "properties": {
                "id": {
                  "type": "string",
                  "description": "Unique identifier for the stream"
                },
                "collection": {
                  "type": "string",
                  "description": "Collection name this stream belongs to"
                },
                "type": {
                  "type": "string",
                  "enum": ["event", "bumper", "commercial", "news", "filler"],
                  "description": "Type of content"
                },
                "year": {
                  "type": "integer",
                  "description": "Year of the content"
                },
                "slot": {
                  "type": "string",
                  "description": "Time slot or description"
                },
                "broadcast_date": {
                  "type": "string",
                  "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
                  "description": "Broadcast date in YYYY-MM-DD format"
                },
                "network": {
                  "type": "string",
                  "description": "Broadcast network (e.g., 'ABC', 'CBS', 'WCCO Minneapolis')"
                },
                "runtime": {
                  "type": "string",
                  "pattern": "^PT(\\d+H)?(\\d+M)?(\\d+S)?$",
                  "description": "Runtime in ISO 8601 duration format (e.g., PT3M44S)"
                },
                "source": {
                  "type": "string",
                  "enum": ["youtube", "archive", "archive_org"],
                  "description": "Source platform"
                },
                "url": {
                  "type": "string",
                  "format": "uri",
                  "description": "URL to the media content"
                },
                "notes": {
                  "type": "string",
                  "description": "Additional notes about the content"
                }
              }
            }
          }
        }
      }
    }
  }
}

